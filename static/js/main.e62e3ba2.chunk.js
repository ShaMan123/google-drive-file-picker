(this["webpackJsonpgoogle-drive-file-picker"]=this["webpackJsonpgoogle-drive-file-picker"]||[]).push([[0],{16:function(e,t,n){},23:function(e,t,n){},24:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(3),i=n.n(a),c=n(7),o=n.n(c),s=(n(16),n(4)),u=n(8),p=(n(23),Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GCP_CLIENT_ID:"CLIENT_ID",REACT_APP_GCP_DRIVE_PICKER_API_KEY:"API_KEY",REACT_APP_GCP_PROJECT_ID:"PROJECT_ID"})),l=p.REACT_APP_GCP_CLIENT_ID,d=p.REACT_APP_GCP_DRIVE_PICKER_API_KEY,_=p.REACT_APP_GCP_PROJECT_ID;function g(){var e=Object(u.a)(),t=Object(s.a)(e,2),n=t[0],a=t[1];return Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)("h1",{children:"Google Drive File Picker"}),Object(r.jsxs)("h2",{children:["Before You begin Edit the ",Object(r.jsx)("code",{children:".env"})," File"]}),Object(r.jsx)("button",{onClick:a,children:Object(r.jsx)("img",{alt:"google drive",src:"https://fonts.gstatic.com/s/i/productlogos/drive_2020q4/v8/web-64dp/logo_drive_2020q4_color_2x_web_64dp.png"})}),Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),Object(r.jsx)("h2",{children:"Enviroment Variables"}),Object(r.jsx)("code",{style:{whiteSpace:"break-spaces"},children:JSON.stringify({CLIENT_ID:l,API_KEY:d,APP_ID:_},null,"\t")}),Object(r.jsx)("div",{children:n.map((function(e){var t=e.base64,n=e.mimeType;return"application/pdf"===n?Object(r.jsx)("object",{data:t,type:n,width:"100%"}):Object(r.jsx)("img",{src:t})}))})]})}var P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,25)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))};o.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(g,{})}),document.getElementById("root")),P()},8:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b}));var r=n(4),a=n(6),i=n(1),c=n.n(i),o=n(2),s=n(9),u=n(10),p=n(3),l=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GCP_CLIENT_ID:"CLIENT_ID",REACT_APP_GCP_DRIVE_PICKER_API_KEY:"API_KEY",REACT_APP_GCP_PROJECT_ID:"PROJECT_ID"}),d=l.REACT_APP_GCP_CLIENT_ID,_=l.REACT_APP_GCP_DRIVE_PICKER_API_KEY,g=l.REACT_APP_GCP_PROJECT_ID,P=["https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.readonly"],f=["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"],h=["image/png","image/jpeg","image/jpg","application/pdf"],v=new(function(){function t(){Object(s.a)(this,t),this.loading=!1,this.ready=!1,this.accessToken=void 0,this.load()}return Object(u.a)(t,[{key:"load",value:function(){var e=Object(o.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,new Promise((function(e,t){window.addEventListener("load",(function(){var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src="https://apis.google.com/js/api.js",n.onload=Object(o.a)(c.a.mark((function n(){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Promise.all([new Promise((function(e,t){return gapi.load("client:auth2",{callback:e,error:t})})),gapi.load("picker","1")]);case 3:return n.next=5,gapi.client.load("drive","v3");case 5:return n.next=7,gapi.client.init({immediate:!1,ux_mode:"redirect",apiKey:_,clientId:d,discoveryDocs:f,scope:P.join(" ")});case 7:e(!0),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),t(n.t0);case 13:case"end":return n.stop()}}),n,null,[[0,10]])}))),n.onerror=t,document.head.appendChild(n)}))}));case 3:this.loading=!1,this.ready=!0;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"signIn",value:function(){var e=Object(o.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){gapi.auth2.getAuthInstance().isSignedIn.get()?e(!0):(gapi.auth2.getAuthInstance().isSignedIn.listen((function(t){t&&e(!0)})),gapi.auth2.getAuthInstance().signIn())}));case 2:this.accessToken=gapi.auth2.getAuthInstance().currentUser.get().getAuthResponse().access_token;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){return gapi.auth2.getAuthInstance().signOut()}},{key:"openDriveFilePicker",value:function(){var e=this;return new Promise(function(){var t=Object(o.a)(c.a.mark((function t(n,r){var i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.ready||r("gapi not ready"),e.accessToken){t.next=10;break}return t.prev=2,t.next=5,e.signIn();case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(2),r(t.t0);case 10:(i=new google.picker.View(google.picker.ViewId.DOCS)).setMimeTypes(h.join(",")),(new google.picker.PickerBuilder).enableFeature(google.picker.Feature.NAV_HIDDEN).enableFeature(google.picker.Feature.MULTISELECT_ENABLED).enableFeature(google.picker.Feature.SUPPORT_DRIVES).setAppId(g).setOAuthToken(e.accessToken).setOrigin(window.location.protocol+"//"+window.location.host).addView(i).setCallback(function(){var t=Object(o.a)(c.a.mark((function t(r){var i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.action!==google.picker.Action.PICKED){t.next=5;break}return t.next=3,Promise.all(r.docs.map(function(){var t=Object(o.a)(c.a.mark((function t(n){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.downloadFile(n.id,n.mimeType);case 2:return r=t.sent,t.abrupt("return",Object(a.a)(Object(a.a)({},n),{},{base64:r}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 3:i=t.sent,n(i);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).build().setVisible(!0);case 14:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"downloadFile",value:function(){var t=Object(o.a)(c.a.mark((function t(n,r){var a,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,gapi.client.drive.files.get({fileId:n,alt:"media"});case 2:return a=t.sent,i="data:"+r+";base64,"+e.from(a.body,"binary").toString("base64"),t.abrupt("return",i);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),t}());function b(){var e=Object(p.useState)([]),t=Object(r.a)(e,2),n=t[0],a=t[1];return[n,Object(p.useCallback)(Object(o.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.openDriveFilePicker();case 2:t=e.sent,a(t);case 4:case"end":return e.stop()}}),e)}))))]}}).call(this,n(17).Buffer)}},[[24,1,2]]]);
//# sourceMappingURL=main.e62e3ba2.chunk.js.map